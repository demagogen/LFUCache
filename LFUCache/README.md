# Overview
–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ—Å–≤—è—â–µ–Ω –∏–∑—É—á–µ–Ω–∏—é —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö -- –∫—ç—à. –ü—Ä–æ–µ–∫—Ç –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ —è–∑—ã–∫–µ C++. –í –∫–∞—á–µ—Å—Ç–≤–µ —Å–∏—Å—Ç–µ–º—ã —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã CMake –∏ CTest.

## Installation
–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ —Å–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ö Linux –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∞–¥—Ä–µ—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤–≤–µ–¥–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å:
```bash
git clone <project_address>
```
–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç, –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å CMake, –≤–≤–µ–¥—è –∫–æ–º–∞–Ω–¥—É:
```bash
cmake --build .
```
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã, —Ç–æ –≤–≤–µ–¥–∏—Ç–µ:
```bash
cmake --build . --target run_tests
```
–ü–æ—Å–ª–µ —á–µ–≥–æ –ø—Ä–æ–µ–∫—Ç —Å–æ–±–µ—Ä–µ—Ç—Å—è –∏ –∑–∞–ø—É—Å—Ç—è—Ç—Å—è —Ç–µ—Å—Ç—ã.
–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –¥–≤–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ê –∏–º–µ–Ω–Ω–æ -- LFUCache –∏ IdealCache. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É, —Å—Ç–æ–∏—Ç –∑–∞–π—Ç–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É—é—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏ –≤–≤–µ—Å—Ç–∏ –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.

## Efficiency
UPD: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø–∞–¥–∞–Ω–∏–π IdealCache –≤—ã—Ä–æ—Å–ª–æ —Å –ø—Ä–æ—à–ª–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–∞ 3 —Ö–∏—Ç–∞.

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

| –ê–ª–≥–æ—Ä–∏—Ç–º üß† | –ü–æ–ø–∞–¥–∞–Ω–∏—è ‚úÖ | –ü—Ä–æ–º–∞—Ö–∏ ‚ùå | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å üìà |
|------------|-------------|-----------|-----------------|
| **OPT**    | **749**     | **254**   | **74.9%**       |
| **LFU**    | 507         | 493       | 50.7%           |

## The guts
–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∞. –ö–∞–∫ –ø–æ–∫–∞–∑–∞–ª–∏ —Ç–µ—Å—Ç—ã, –∫—ç—à –Ω–µ –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ —Å –∫—ç—à–∞–º–∏ –º–æ–∏—Ö –∫–æ–º—Ä–∞–¥–æ–≤, –ø–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ, –±—ã–ª–∏ –≤—ã–¥–≤–∏–Ω—É—Ç—ã —Å–ª–µ–¥—É—é—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

### –ú–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –ø–∞–º—è—Ç–∏
```cpp
size_t  optimal_page()
{
	size_t hits =  0;

	for (size_t index =  0; index < data_amount; index++)
	{
		if (search(data[index]))
		{
			hits++;
			continue;
		}

		auto data_frequency_iterator = DataFrequency.find(data[index]);
		if (data_frequency_iterator->second ==  1) continue;

		if (capacity > Cache.size())
		{
			Cache.emplace(data[index], data[index]);
		}
		else
		{
			auto cache_key =  predict(index +  1);
			Cache.erase (cache_key);
			Cache.emplace(data[index], data[index]);
		}
	}
	return hits;
}
```
–í—ã—à–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∞ (–æ–Ω –∂–µ –∞–ª–≥–æ—Ä–∏—Ç–º –ë–µ–ª–∞–¥–∏ –∏ OPT). –í –¥–∞–Ω–Ω–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –∫–æ–¥–∞ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º. –ü–µ—Ä–≤–æ–µ, —á—Ç–æ –±—Ä–æ—Å–∞–µ—Ç—Å—è –≤ –≥–ª–∞–∑–∞, —Ç–∞–∫ —ç—Ç–æ —á–∞—Å—Ç–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ ``` data[index] ```. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —ç—Ç–æ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é ``` int data_element = data[index]```.

–í –¥–∞–Ω–Ω–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –∫–æ–¥–∞ –µ—Å—Ç—å –æ—à–∏–±–∫–∞, —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –≤ –±—É–¥—É—â–µ–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ —ç—Ç–æ–≥–æ –∂–µ —ç–ª–µ–º–µ–Ω—Ç–∞. –Ø –ø—Ä–∏–Ω—è–ª —Ä–µ—à–µ–Ω–∏–µ –æ—Ç–æ–π—Ç–∏ –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —á–∏—Å—Ç–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –ë–µ–ª–∞–¥–∏ –∏ –¥–æ–±–∞–≤–∏–ª ```std::unordered_map``` —Å —Å—á–µ—Ç—á–∏–∫–æ–º —á–∞—Å—Ç–æ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ ```data```. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–Ω–µ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤ –∫—ç—à —Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—Ç—Ä–µ—Ç—è—Ç—Å—è –µ–¥–∏–Ω–æ–∂–¥—ã. –≠—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ä–∞–∑—É –¥–∞–µ—Ç –≤—ã–π–≥—Ä—ã—à –≤ —Ç–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –≤ –ø–æ—Ç–æ–∫–µ –¥–∞–Ω–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –º–Ω–æ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü "–æ–¥–∏–Ω–æ—á–µ–∫", –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑. –í –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º –∞–ª–≥–æ—Ä–∏—Ç–º–µ –ë–µ–ª–∞–¥–∏ –æ–Ω–∏ –±—ã –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –≤ –∫—ç—à, –≤—ã—Ç–µ—Å–Ω—è—è –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è. –í –º–æ–µ–º –∂–µ —Å–ª—É—á–∞–µ –æ–Ω–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è.

```cpp
class  IdealCache
{
private:
	size_t capacity;
	size_t data_amount;
	std::vector<int> data;
	std::unordered_map<size_t, size_t> DataFrequency;
	std::unordered_map<size_t, int> Cache;
	...
```
–í —Ö—ç—à —Ç–∞–±–ª–∏—Ü—É DataFrequency –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —á–∞—Å—Ç–æ—Ç–∞ –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø—Ä–∏ –≤–≤–æ–¥–µ, —á—Ç–æ –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç—Å—è –≤ –º–µ—Ç–æ–¥–µ ```read_data()```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–æ–Ω–µ—á–Ω—ã–π –º–µ—Ç–æ–¥ ```optimal_page``` –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º
```cpp
size_t  optimal_page()
{
	size_t hits =  0;
	for (size_t index =  0; index < data_amount; index++)
	{
		int data_element = data[index];
		if (search(data_element))
		{
			hits++;
			continue;
		}

		auto data_frequency_iterator = DataFrequency.find(data_element);
		if (data_frequency_iterator->second ==  1) continue;
		if (capacity > Cache.size())
		{
			Cache.emplace(data_element, data_element);
		}
		else
		{
			auto cache_key =  predict(index +  1);
			Cache.erase (cache_key);
			Cache.emplace(data_element, data_element);
		}
	}
	return hits;
}
```
## Used Literature and Articles

https://stackoverflow.com/questions/55451825/why-is-vector-faster-than-unordered-map

https://stackoverflow.com/questions/8277050/optimizing-stdvector-operator-vector-access-when-it-becomes-a-bottlenec

https://www.geeksforgeeks.org/cpp/complexity-guarantees-of-the-standard-containers-cpp/

https://julien.jorge.st/posts/en/effortless-performance-improvements-in-cpp-std-unordered_map/

https://www.geeksforgeeks.org/dsa/optimal-page-replacement-algorithm/

https://www.geeksforgeeks.org/dsa/least-frequently-used-lfu-cache-implementation/
